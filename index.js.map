{"version":3,"file":"index.js","sources":["../src/js/get-movies.js","../src/js/testing-get-movies.js","../src/js/nightMode.js","../src/js/footerModal.js"],"sourcesContent":["\"use strict\";\n\n// fetch trailers and movie functions //\nimport axios from 'axios';\nimport Notiflix from 'notiflix';\n\nexport const API_KEY = '493c6d740f024fcc02750f44c1518471';\nexport const BASE_URL = `https://api.themoviedb.org/3`;\n\n\nexport async function getTrailer(movieId) {\n  const trailerUrl = `${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}&language=en-US`;\n  try {\n    const response = await axios.get(trailerUrl);\n    const trailers = response.data.results;\n\n    const youtubeTrailer = trailers.find(\n      trailer => trailer.site === 'YouTube' && trailer.type === 'Trailer'\n    );\n\n    return youtubeTrailer\n      ? `https://www.youtube.com/embed/${youtubeTrailer.key}?autoplay=1`\n      : null;\n  } catch (error) {\n    if (error.response && error.response.status === 404) {\n      return null;\n    } else {\n      console.error('A apărut o eroare la obținerea trailerului.');\n      return null;\n    }\n  }\n}\n\nexport async function getMovies(searchQuery = '', page = 1) {\n  let url = '';\n  if (searchQuery) {\n    url = `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${encodeURIComponent(\n      searchQuery\n    )}&page=${page}`;\n  } else {\n    url = `${BASE_URL}/trending/all/day?language=en-US&api_key=${API_KEY}&page=${page}`;\n  }\n\n  try {\n    const response = await axios.get(url);\n\n    const moviesWithTrailers = await Promise.all(\n      response.data.results.map(async movie => {\n        try {\n          const trailerUrl = await getTrailer(movie.id);\n          return { ...movie, trailerUrl };\n        } catch (error) {\n          return { ...movie, trailerUrl: null };\n        }\n      })\n    );\n\n    return { ...response.data, results: moviesWithTrailers };\n  } catch (error) {\n    Notiflix.Notify.failure(\n      'Oops! Something went wrong! Try reloading the page!'\n    );\n    throw error;\n  }\n}","\"use strict\";\n\nimport { getTrailer, getMovies } from './get-movies.js';\nimport Notiflix from 'notiflix';\n\n// Test pentru getTrailer\nexport async function testFetchMovieTrailer() {\n  const movieId = 550; // ID-ul filmului \"Fight Club\"\n  const trailerUrl = await getTrailer(movieId);\n  console.log('Trailer URL:', trailerUrl);\n}\n\n// Test pentru getMovies\nexport async function testFetchMovies() {\n  const searchQuery = 'Inception';\n  const page = 1;\n  const movies = await getMovies(searchQuery, page);\n  console.log('Movies:', movies);\n}\n\n// Apelează funcțiile de test\ntestFetchMovieTrailer();\ntestFetchMovies();","export let nightMode = localStorage.getItem(\"nightMode\");\nconst nightModeToggle = document.querySelector(\"#checkbox\");\n\nconst enableNightMode = ()=>{\n    document.body.classList.add('nightMode');\n    localStorage.setItem(\"nightMode\", \"enabled\");\n};\n\nconst disableNightMode =() =>{\n    document.body.classList.remove(\"nightMode\");\n    localStorage.setItem(\"nightMode\", null);\n};\n\nif (nightMode === 'enabled'){\n    nightModeToggle.checked = true;\n    enableNightMode();\n}\n\nnightModeToggle.addEventListener(\"change\", ()=>{\n    nightMode = localStorage.getItem(\"nightMode\");\n    if (nightModeToggle.checked){\n        enableNightMode();\n    }else{\n        disableNightMode();\n    }\n});","// Obține elementele necesare\nconst modal = document.getElementById('myFooterModal');\nconst btn = document.getElementById('openFooterModal');\nconst closeBtn = document.querySelector('.close-button-member');\n\n// Funcție pentru a deschide fereastra modală\nfunction openModal() {\n  modal.style.display = 'block';\n  window.addEventListener('keydown', handleEscapeKeyPress);\n}\n\n// Funcție pentru a închide fereastra modală\nfunction closeModal() {\n  modal.style.display = 'none';\n  window.removeEventListener('keydown', handleEscapeKeyPress);\n}\n\n// Funcție pentru a gestiona apăsarea tastei Escape\nfunction handleEscapeKeyPress(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nbtn.addEventListener('click', openModal);\ncloseBtn.addEventListener('click', closeModal);\n\n// Închide fereastra modală dacă utilizatorul dă click în afara acesteia\nwindow.addEventListener('click', function (event) {\n  if (event.target === modal) {\n    closeModal();\n  }\n});\n"],"names":["API_KEY","BASE_URL","getTrailer","movieId","trailerUrl","youtubeTrailer","axios","trailer","error","getMovies","searchQuery","page","url","response","moviesWithTrailers","movie","Notiflix","testFetchMovieTrailer","testFetchMovies","movies","nightMode","nightModeToggle","enableNightMode","disableNightMode","modal","btn","closeBtn","openModal","handleEscapeKeyPress","closeModal","event"],"mappings":"6vBAMO,MAAMA,EAAU,mCACVC,EAAW,+BAGjB,eAAeC,EAAWC,EAAS,CACxC,MAAMC,EAAa,GAAGH,CAAQ,UAAUE,CAAO,mBAAmBH,CAAO,kBACzE,GAAI,CAIF,MAAMK,GAHW,MAAMC,EAAM,IAAIF,CAAU,GACjB,KAAK,QAEC,KAC9BG,GAAWA,EAAQ,OAAS,WAAaA,EAAQ,OAAS,SAChE,EAEI,OAAOF,EACH,iCAAiCA,EAAe,GAAG,cACnD,IACL,OAAQG,EAAO,CACd,OAAIA,EAAM,UAAYA,EAAM,SAAS,SAAW,KAG9C,QAAQ,MAAM,6CAA6C,EACpD,IAEV,CACH,CAEO,eAAeC,EAAUC,EAAc,GAAIC,EAAO,EAAG,CAC1D,IAAIC,EAAM,GACNF,EACFE,EAAM,GAAGX,CAAQ,yBAAyBD,CAAO,yBAAyB,mBACxEU,CACN,CAAK,SAASC,CAAI,GAEdC,EAAM,GAAGX,CAAQ,4CAA4CD,CAAO,SAASW,CAAI,GAGnF,GAAI,CACF,MAAME,EAAW,MAAMP,EAAM,IAAIM,CAAG,EAE9BE,EAAqB,MAAM,QAAQ,IACvCD,EAAS,KAAK,QAAQ,IAAI,MAAME,GAAS,CACvC,GAAI,CACF,MAAMX,EAAa,MAAMF,EAAWa,EAAM,EAAE,EAC5C,MAAO,CAAE,GAAGA,EAAO,WAAAX,EACpB,MAAe,CACd,MAAO,CAAE,GAAGW,EAAO,WAAY,IAAI,CACpC,CACT,CAAO,CACP,EAEI,MAAO,CAAE,GAAGF,EAAS,KAAM,QAASC,CAAkB,CACvD,OAAQN,EAAO,CACd,MAAAQ,EAAS,OAAO,QACd,qDACN,EACUR,CACP,CACH,CC1DO,eAAeS,GAAwB,CAE5C,MAAMb,EAAa,MAAMF,EAAW,GAAO,EAC3C,QAAQ,IAAI,eAAgBE,CAAU,CACxC,CAGO,eAAec,GAAkB,CAGtC,MAAMC,EAAS,MAAMV,EAFD,YAEwB,CAAI,EAChD,QAAQ,IAAI,UAAWU,CAAM,CAC/B,CAGAF,IACAC,EAAiB,ECtBV,IAAIE,EAAY,aAAa,QAAQ,WAAW,EACvD,MAAMC,EAAkB,SAAS,cAAc,WAAW,EAEpDC,EAAkB,IAAI,CACxB,SAAS,KAAK,UAAU,IAAI,WAAW,EACvC,aAAa,QAAQ,YAAa,SAAS,CAC/C,EAEMC,EAAkB,IAAK,CACzB,SAAS,KAAK,UAAU,OAAO,WAAW,EAC1C,aAAa,QAAQ,YAAa,IAAI,CAC1C,EAEIH,IAAc,YACdC,EAAgB,QAAU,GAC1BC,KAGJD,EAAgB,iBAAiB,SAAU,IAAI,CAC3CD,EAAY,aAAa,QAAQ,WAAW,EACxCC,EAAgB,QAChBC,IAEAC,GAER,CAAC,ECxBD,MAAMC,EAAQ,SAAS,eAAe,eAAe,EAC/CC,EAAM,SAAS,eAAe,iBAAiB,EAC/CC,EAAW,SAAS,cAAc,sBAAsB,EAG9D,SAASC,GAAY,CACnBH,EAAM,MAAM,QAAU,QACtB,OAAO,iBAAiB,UAAWI,CAAoB,CACzD,CAGA,SAASC,GAAa,CACpBL,EAAM,MAAM,QAAU,OACtB,OAAO,oBAAoB,UAAWI,CAAoB,CAC5D,CAGA,SAASA,EAAqBE,EAAO,CAC/BA,EAAM,MAAQ,UAChBD,GAEJ,CAEAJ,EAAI,iBAAiB,QAASE,CAAS,EACvCD,EAAS,iBAAiB,QAASG,CAAU,EAG7C,OAAO,iBAAiB,QAAS,SAAUC,EAAO,CAC5CA,EAAM,SAAWN,GACnBK,GAEJ,CAAC"}