{"version":3,"file":"index.js","sources":["../src/partials/get-movies.js","../src/partials/testing-get-movies.js"],"sourcesContent":["\"use strict\";\n\n// fetch trailers and movie functions //\nimport axios from 'axios';\nimport Notiflix from 'notiflix';\n\nexport const API_KEY = '493c6d740f024fcc02750f44c1518471';\nexport const BASE_URL = `https://api.themoviedb.org/3`;\n\n\nexport async function getTrailer(movieId) {\n  const trailerUrl = `${BASE_URL}/movie/${movieId}/videos?api_key=${API_KEY}&language=en-US`;\n  try {\n    const response = await axios.get(trailerUrl);\n    const trailers = response.data.results;\n\n    const youtubeTrailer = trailers.find(\n      trailer => trailer.site === 'YouTube' && trailer.type === 'Trailer'\n    );\n\n    return youtubeTrailer\n      ? `https://www.youtube.com/embed/${youtubeTrailer.key}?autoplay=1`\n      : null;\n  } catch (error) {\n    if (error.response && error.response.status === 404) {\n      return null;\n    } else {\n      console.error('A apărut o eroare la obținerea trailerului.');\n      return null;\n    }\n  }\n}\n\nexport async function getMovies(searchQuery = '', page = 1) {\n  let url = '';\n  if (searchQuery) {\n    url = `${BASE_URL}/search/movie?api_key=${API_KEY}&language=en-US&query=${encodeURIComponent(\n      searchQuery\n    )}&page=${page}`;\n  } else {\n    url = `${BASE_URL}/trending/all/day?language=en-US&api_key=${API_KEY}&page=${page}`;\n  }\n\n  try {\n    const response = await axios.get(url);\n\n    const moviesWithTrailers = await Promise.all(\n      response.data.results.map(async movie => {\n        try {\n          const trailerUrl = await getTrailer(movie.id);\n          return { ...movie, trailerUrl };\n        } catch (error) {\n          return { ...movie, trailerUrl: null };\n        }\n      })\n    );\n\n    return { ...response.data, results: moviesWithTrailers };\n  } catch (error) {\n    Notiflix.Notify.failure(\n      'Oops! Something went wrong! Try reloading the page!'\n    );\n    throw error;\n  }\n}","\"use strict\";\n\nimport { getTrailer, getMovies } from './get-movies.js';\nimport Notiflix from 'notiflix';\n\n// Test pentru getTrailer\nexport async function testFetchMovieTrailer() {\n  const movieId = 550; // ID-ul filmului \"Fight Club\"\n  const trailerUrl = await getTrailer(movieId);\n  console.log('Trailer URL:', trailerUrl);\n}\n\n// Test pentru getMovies\nexport async function testFetchMovies() {\n  const searchQuery = 'Inception';\n  const page = 1;\n  const movies = await getMovies(searchQuery, page);\n  console.log('Movies:', movies);\n}\n\n// Apelează funcțiile de test\ntestFetchMovieTrailer();\ntestFetchMovies();"],"names":["API_KEY","BASE_URL","getTrailer","movieId","trailerUrl","youtubeTrailer","axios","trailer","error","getMovies","searchQuery","page","url","response","moviesWithTrailers","movie","Notiflix","testFetchMovieTrailer","testFetchMovies","movies"],"mappings":"6vBAMO,MAAMA,EAAU,mCACVC,EAAW,+BAGjB,eAAeC,EAAWC,EAAS,CACxC,MAAMC,EAAa,GAAGH,CAAQ,UAAUE,CAAO,mBAAmBH,CAAO,kBACzE,GAAI,CAIF,MAAMK,GAHW,MAAMC,EAAM,IAAIF,CAAU,GACjB,KAAK,QAEC,KAC9BG,GAAWA,EAAQ,OAAS,WAAaA,EAAQ,OAAS,SAChE,EAEI,OAAOF,EACH,iCAAiCA,EAAe,GAAG,cACnD,IACL,OAAQG,EAAO,CACd,OAAIA,EAAM,UAAYA,EAAM,SAAS,SAAW,KAG9C,QAAQ,MAAM,6CAA6C,EACpD,IAEV,CACH,CAEO,eAAeC,EAAUC,EAAc,GAAIC,EAAO,EAAG,CAC1D,IAAIC,EAAM,GACNF,EACFE,EAAM,GAAGX,CAAQ,yBAAyBD,CAAO,yBAAyB,mBACxEU,CACN,CAAK,SAASC,CAAI,GAEdC,EAAM,GAAGX,CAAQ,4CAA4CD,CAAO,SAASW,CAAI,GAGnF,GAAI,CACF,MAAME,EAAW,MAAMP,EAAM,IAAIM,CAAG,EAE9BE,EAAqB,MAAM,QAAQ,IACvCD,EAAS,KAAK,QAAQ,IAAI,MAAME,GAAS,CACvC,GAAI,CACF,MAAMX,EAAa,MAAMF,EAAWa,EAAM,EAAE,EAC5C,MAAO,CAAE,GAAGA,EAAO,WAAAX,EACpB,MAAe,CACd,MAAO,CAAE,GAAGW,EAAO,WAAY,IAAI,CACpC,CACT,CAAO,CACP,EAEI,MAAO,CAAE,GAAGF,EAAS,KAAM,QAASC,CAAkB,CACvD,OAAQN,EAAO,CACd,MAAAQ,EAAS,OAAO,QACd,qDACN,EACUR,CACP,CACH,CC1DO,eAAeS,GAAwB,CAE5C,MAAMb,EAAa,MAAMF,EAAW,GAAO,EAC3C,QAAQ,IAAI,eAAgBE,CAAU,CACxC,CAGO,eAAec,GAAkB,CAGtC,MAAMC,EAAS,MAAMV,EAFD,YAEwB,CAAI,EAChD,QAAQ,IAAI,UAAWU,CAAM,CAC/B,CAGAF,IACAC,EAAiB"}