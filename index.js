import{a as q,N as f,S as J,P as K}from"./assets/vendor-BwJ6lRmC.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}})();const h="493c6d740f024fcc02750f44c1518471",v="https://api.themoviedb.org/3";async function N(e){const t=`${v}/movie/${e}/videos?api_key=${h}&language=en-US`;try{const r=(await q.get(t)).data.results.find(i=>i.site==="YouTube"&&i.type==="Trailer");return r?`https://www.youtube.com/embed/${r.key}?autoplay=1`:null}catch(o){return o.response&&o.response.status===404||console.error("A apărut o eroare la obținerea trailerului."),null}}async function S(e="",t=1){let o="";e?o=`${v}/search/movie?api_key=${h}&language=en-US&query=${encodeURIComponent(e)}&page=${t}`:o=`${v}/trending/all/day?language=en-US&api_key=${h}&page=${t}`;try{const n=await q.get(o),r=await Promise.all(n.data.results.map(async i=>{console.log("Fetching trailers for movie ID:",i.id);const a=await N(i.id);return{...i,trailerUrl:a}}));return{...n.data,results:r}}catch(n){throw console.error("Error fetching movies:",n.response?n.response.data:n),f.Notify.failure("Oops! Something went wrong! Try reloading the page!"),n}}async function G(){const t=await N(550);console.log("Trailer URL:",t)}async function V(){const o=await S("Inception",1);console.log("Movies:",o)}G();V();let B=localStorage.getItem("nightMode");const L=document.querySelector("#checkbox"),F=()=>{document.body.classList.add("nightmode"),localStorage.setItem("nightMode","enabled")},z=()=>{document.body.classList.remove("nightmode"),localStorage.setItem("nightMode","disabled")};B==="enabled"&&(L.checked=!0,F());L.addEventListener("change",()=>{B=localStorage.getItem("nightMode"),L.checked?F():z()});const E=e=>{try{const t=localStorage.getItem(e);return t?t.startsWith("{")||t.startsWith("[")?JSON.parse(t):t:null}catch(t){return console.error("Eroare la parsarea datelor din localStorage:",t),null}};function X(e){if(!e||!e.id){console.error("Datele filmului sunt invalide");return}const t={html:e.cardHtml,data:e,isInQueue:!0};localStorage.setItem(e.id.toString(),JSON.stringify(t))}function Z(e){if(!e||!e.id){console.error("Datele filmului sunt invalide");return}const t={html:e.cardHtml,data:e,isWatched:!0};localStorage.setItem(e.id.toString(),JSON.stringify(t))}function U(e,t,o){const n=E(e);if(!n){console.error("Filmul nu a fost găsit în storage");return}n.isInQueue=t,n.isWatched=o,localStorage.setItem(e.toString(),JSON.stringify(n))}let b=[];async function D(){const e=`${v}/genre/movie/list?api_key=${h}&language=en-US`;try{b=(await q.get(e)).data.genres}catch(t){console.error("Eroare la încărcarea genurilor: ",t)}}window.addEventListener("load",async()=>{await D()});const y=e=>{try{const t=localStorage.getItem(e);return t?t.startsWith("{")||t.startsWith("[")?JSON.parse(t):t:null}catch(t){return console.error("Eroare la parsarea datelor din localStorage:",t),null}},A=(e,t)=>{if(!e||typeof e!="object"||!e.genre_ids){console.error("Datele filmului nu sunt complete sau sunt într-un format incorect.");return}const o=Array.isArray(e.genre_ids)&&e.genre_ids.length>0?e.genre_ids.map(s=>{var O;return((O=b.find(Y=>Y.id===s))==null?void 0:O.name)||"Unknown"}).filter(s=>s!=="Unknown").join(", "):"Unknown";let n=e.title||"Unknown Title";e.media_type&&(n=e.media_type==="movie"?e.original_title||e.title:e.original_name||e.name);const r=e.title||e.name;e.id;const i=!!y(e.id),a=`
    <div class="film-modal">
        <div class="film-modal-content">
         <span class="close-modal">&times;</span>
         <h2 class="film-modal-title">${r}</h2>
        ${e.trailerUrl?`<div class="film-modal-trailer">
               <iframe src="${e.trailerUrl}" frameborder="0" allowfullscreen></iframe>
             </div>`:`<div class="film-modal-poster">
               <img src="https://image.tmdb.org/t/p/w500${e.poster_path}" alt="${r}">
             </div>`}
        <h3>Original title: ${n}</h3>
        <p class="film-modal-score"><span>Score: ${typeof e.vote_average=="number"?e.vote_average.toFixed(2):"N/A"}</span></p>
        <p class="modal-genre-paragraph"><b>Genre:</b> ${o}</p>
        <h4 class="film-modal-about">ABOUT</h4>
        <p>${e.overview}</p>
        <div class="film-modal-actions">
          <button id="addToWatchedBtn">ADD TO WATCHED</button>
          <button id="addToQueueBtn">${i?"REMOVE FROM QUEUE":"ADD TO QUEUE"}</button>
        </div>
      </div>
    </div>`;document.body.insertAdjacentHTML("beforeend",a);const l=document.querySelector(".film-modal"),g=document.querySelector("#addToQueueBtn"),d=document.querySelector("#addToWatchedBtn"),c=()=>{const s=y(e.id);s&&(g.textContent=s.isInQueue?"REMOVE FROM QUEUE":"ADD TO QUEUE",d.textContent=s.isWatched?"REMOVE FROM WATCHED":"ADD TO WATCHED")};c(),g.addEventListener("click",()=>{const s=y(e.id);s?(U(e.id,!s.isInQueue,s.isWatched),s.isInQueue&&C(e.id)):X({id:e.id,cardHtml:t,data:e}),c()}),d.addEventListener("click",()=>{const s=y(e.id);s?(U(e.id,s.isInQueue,!s.isWatched),s.isWatched&&C(e.id)):Z({id:e.id,cardHtml:t,data:e}),c()}),new J(".film-modal-content a",{overlay:!0,close:!0,showCounter:!0});function m(s){(s.target===l||s.target.classList.contains("close-modal"))&&(l.remove(),document.removeEventListener("click",m),document.removeEventListener("keydown",u))}function u(s){s.key==="Escape"&&(l.remove(),document.removeEventListener("keydown",u),document.removeEventListener("click",m))}l.addEventListener("click",m),document.addEventListener("keydown",u)};function C(e){console.log(`Încercăm să eliminăm cardul cu ID-ul: ${e}`);const t=document.querySelector(`.movie-wrapper__card[data-filmid="${e}"]`);t?(t.remove(),console.log(`Cardul cu ID-ul: ${e} a fost eliminat.`)):console.log(`Cardul cu ID-ul: ${e} nu a fost găsit.`)}async function M(e){const t=document.querySelector(".movie-wrapper"),o=await e;t.textContent="",!(!o||!o.results)&&o.results.forEach(n=>{const r=document.createElement("div");r.classList.add("movie-wrapper__card");let i=n.title||n.name||"Unknown Title";n.media_type==="tv"?i=n.name||n.original_name||"Unknown Title":n.media_type==="movie"&&(i=n.title||n.original_title||"Unknown Title");const a=n.genre_ids.map(c=>{const m=b.find(u=>u.id===c);return m?m.name:null}).filter(c=>c!==null).join(", ");a.includes("Unknown")&&(console.log("ID-uri genuri necunoscute:",n.genre_ids),console.log("Lista de genuri disponibile:",b));let l;n.media_type==="movie"?l=n.release_date?n.release_date.split("-")[0]:"Unknown Year":n.media_type==="tv"?l=n.first_air_date?n.first_air_date.split("-")[0]:"Unknown Year":l="Unknown Year";const g=typeof n.vote_average=="number"?n.vote_average.toFixed(2):"N/A",d=n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:"path/to/default/image.jpg";r.setAttribute("data-filmId",n.id.toString()),r.innerHTML=`
      <div class="movie-wrapper__card-img">
        <img src="${d}" alt="${i}">
      <span class="movie-wrapper__info-rating">${g}</span>
        </div>
      <div class="movie-wrapper__footer">
        <div class="movie-wrapper__title">${i}</div>
        <div class="movie-wrapper__info">
          <p class="movie-wrapper__info-genres">${a}</p>
          <span class="movie-wrapper__info-year"> | ${l}</span>
          
        </div>
      </div>`,t.append(r),r.addEventListener("click",()=>{const c=document.querySelector(".film-modal");c&&c.remove(),A(n,r.outerHTML)})})}const I=document.getElementById("myFooterModal"),ee=document.getElementById("openFooterModal"),te=document.querySelector(".close-button-member");function ne(){I.style.display="block",window.addEventListener("keydown",Q)}function $(){I.style.display="none",window.removeEventListener("keydown",Q)}function Q(e){e.key==="Escape"&&$()}ee.addEventListener("click",ne);te.addEventListener("click",$);window.addEventListener("click",function(e){e.target===I&&$()});let _=document.getElementById("scrollToTopBtn");window.onscroll=function(){P()};function P(){document.body.scrollTop>20||document.documentElement.scrollTop>20?_.style.display="block":_.style.display="none"}_.addEventListener("click",W);function W(){window.scrollTo({top:0,behavior:"smooth"})}let w=!1;function x(e){const t=e.target.closest(".movie-wrapper__card");if(t){const o=t.getAttribute("data-filmid"),n=E(o);n&&n.data&&A(n.data.data,n.html)}}function H(e){e.preventDefault();const t=document.querySelector(".watched"),o=document.querySelector(".movie"),n=document.getElementById("pagination-container"),r=document.querySelector(".search-form"),i=document.querySelectorAll(".watched-queue-container"),a=document.querySelector(".library-container"),l=document.querySelectorAll(".site-nav-button"),g=document.querySelector(".site-nav-item.my-library-btn");t&&(t.innerHTML=""),o&&(o.innerHTML=""),n&&(n.style.display="none"),r&&(r.style.display="none"),g&&(g.style.display="none"),i.forEach(c=>c.style.display="flex"),l.forEach(c=>c.style.display="flex"),a.style.display="flex";const d=document.querySelector(".queue");if(d){d.innerHTML="",d.style.display="grid",o.style.display="none",t.style.display="none";for(let c=0;c<localStorage.length;c++){const m=localStorage.key(c),u=E(m);u&&u.isInQueue&&(d.innerHTML+=u.html)}w||(document.querySelector(".library-container").addEventListener("click",x),w=!0)}j(d)}function oe(e){e.preventDefault();const t=document.querySelector(".watched"),o=document.querySelector(".movie"),n=document.querySelector(".queue");if(o&&(o.innerHTML=""),n&&(n.innerHTML=""),t){o.style.display="none",t.innerHTML="",t.style.display="grid",n.style.display="none";for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r),a=E(i);a&&a.isWatched&&(t.innerHTML+=a.html)}}w||(document.querySelector(".library-container").addEventListener("click",x),w=!0),j(t)}function re(){const e=document.querySelector('a[data-request="library"]'),t=document.querySelector('a[data-request="queue"]'),o=document.querySelector('a[data-request="watched"]');e&&e.addEventListener("click",H),t&&t.addEventListener("click",H),o&&o.addEventListener("click",oe)}function j(e){let t=0,o=0;const n=document.querySelector("header");n&&(t=n.offsetHeight);const r=document.querySelector("footer");r&&(o=r.offsetHeight);const a=window.innerHeight-t-o;e&&(e.style.minHeight=`${a}px`)}const k={totalItems:500,itemsPerPage:1,visiblePages:5,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",usageStatistics:!1,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',disabledMoveButton:'<span class="btn-hidden tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>',moveButton:({type:e})=>{let t="";return e==="first"&&(t='<a href="#" class="tui-page-btn tui-first custom-class-first"><span class="tui-ico-first">1</span></a>'),e==="prev"&&(t='<a href="#" class="arrow tui-page-btn tui-prev custom-class-prev tui-first-child"><span class="material-icons-outlined">arrow_back</span></a>'),e==="next"&&(t='<a href="#" class="arrow tui-page-btn tui-next custom-class-next"><span class="material-icons-outlined">arrow_forward</span></a>'),e==="last"&&(t='<a href="#" class="tui-page-btn tui-last custom-class-last"><span class="tui-ico-last">20</span>'),t}}};let p="";const T=document.querySelector(".search-form"),ie=document.querySelector(".submit-btn");ie.addEventListener("click",()=>{T.dispatchEvent(new Event("submit"))});T.addEventListener("submit",async e=>{e.preventDefault();const t=e.currentTarget.elements.searchQuery.value.trim();if(console.log("Search query:",t),!t){f.Notify.failure("Please enter a search term.");return}p=t;try{const o=await S(p);if(console.log("Movies data:",o),!o||!o.results||o.results.length===0){f.Notify.failure(`Sorry, we couldn't find any films matching "${p}".`);return}else f.Notify.success(`We found ${o.total_results} films matching "${p}".`);k.totalItems=o.total_pages,R(k.totalItems),M(o),T.elements.searchQuery.value=""}catch(o){console.error("Search result is not successful:",o),f.Notify.failure("An error occurred while fetching the movies.")}});async function R(){new K(document.getElementById("pagination-container"),k).on("afterMove",t);async function t(r){const i=Number(document.querySelector(".tui-ico-last").textContent),a=r.page;a>1&a<=i&&o(a);const l=await S(p,a);console.log(l),M(l),n()}function o(r){const i=document.querySelector(".custom-class-first"),a=document.querySelector(".custom-class-last"),l=Number(document.querySelector(".tui-ico-last").textContent);if(r<4){i.classList.add("btn-hidden");return}if(l-r<3){a.classList.add("btn-hidden");return}a.classList.remove("btn-hidden"),i.classList.remove("btn-hidden")}function n(){window.scrollTo({top:0,behavior:"smooth"})}}const ae=()=>{const e=document.getElementById("year"),t=new Date().getFullYear();e.textContent=t};window.addEventListener("load",async()=>{try{ae(),re(),P(),W();const e=await S();M(e),R(e)}catch(e){console.log("Eroare la încărcarea filmelor populare:",e)}});
//# sourceMappingURL=index.js.map
